<h2><%= @post.title %></h2>
<p><%= @post.body %></p>

<table>
  <tr>
    <th>Up</th>
    <th>Down</th>
    <th>---</th>
    <th>---</th>
  </tr>
  <tr>
    <td><%= @post.votes_up %></td>
    <td><%= @post.votes_down %></td>
    <td>
      <form action="/rate_post/<%= @post.id %>" method="post">
        <input type="hidden" name="_method" value="put">
        <input type="hidden" name="_vote_type" value="up">
        <input type ="submit" value="Vote Up">
      </form>
    </td>
    <td>
      <form action="/rate_post/<%= @post.id %>" method="post">
        <input type="hidden" name="_method" value="put">
        <input type="hidden" name="_vote_type" value="down">
        <input type ="submit" value="Vote Down">
      </form>
    </td>
  </tr>
</table>

<h4 style="color:green;"><%= flash[:notice] %></h4>
<h4 style="color:red;"><%= flash[:error] %></h4>

<h3>Comments</h3>

<table>
  <tr>
    <th>Author</th>
    <th>Body</th>
    <th>Destroy</th>
  </tr>
<% @post.comments.each do |comment| %>
    <tr>
      <td><%= comment.posted_by %></td>
      <td><%= comment.body %></td>
      <td>
        <form action="/posts/<%= @post.id %>/comments/<%= comment.id %>" method="post">
          <input type="hidden" name="_method" value="delete">
          <input type ="submit" value="Destroy" onclick="return confirmation();">
        </form>
      </td>
    </tr>
<% end %>
</table>

<h3>Add Comment</h3>

<form action="/posts/<%= @post.id %>/comments" method="post">
  <label for="posted_by">Author</label>
  <input type="text" name="posted_by">
  <label for="body">Body</label>
  <input type="text" name="body">
  <input type ="submit" value="Add Comment">
</form>

<br>

<a href="/posts">Back</a>


<script>
  function confirmation(){
    return window.confirm("Are you sure?");
  }
</script>
